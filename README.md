# Библиотека для работы API кассового сервера R-Keeper 7

Библиотека под .NET Core 3.1, позволяет выполнять несколько запросов к API кассовому серверу R-Keeper v7(зал, доставка, колл-центр) по HTTP-протоколу. Реализовано только несколько запросов, эта библиотека представлена как пример, а не законченный проект.

Обмен данными представляет собой обмен XML-документами

```xml
<?xml version="1.0" encoding="windows-1251"?>
<RK7Query>
  <RK7CMD CMD="GetSystemInfo"/>
</RK7Query>
```

Компания UCS предоставляет XSD схемы всех запросов и ответов, на их основе были сгенерированы классы которые сериализуются в процессе работы. Для добавления новых запросов надо сконвертировать нужные XSD файлы в классы .NET.

## Подключение к  API
По умолчанию в API R-Keeper выключен HTTP-интерфейс, для доступа необходимо его включить и перезагрузить кассовый сервер. 

## Конфигурация и запуск

```c#
ClientOptions clientOptions = new ClientOptions
{
  Host = "https://x.x.x.x:xxxx", //Хост
  Username = "xxxx", //Логин для basic-авторизации
  Password = "xxxx", //Пароль 
  Path = "/rk7api/v0/xmlinterface.xml" //Путь на кассовом сервере
};
```

Для запуска Example надо прописать все данные сервера в appsettings.json

Официальная документация от UCS: https://apidocs.ucs.ru/doku.php/ru:rk7xmlinterface

## Дополнительные функции 

* Внедрение зависимостей
* Ведение журнала ILogger
* Конфигурация через IConfigureOptions<TOptions>

